{% extends 'backend/backbase.html' %}

{% block head %}
    <form action="" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="form-group">
            <label for="">原头像</label>
            <img src="/media/{{ request.user.head }}" height="80" width="80">
        </div>
        <div class="form-group">
            <label for="id_myfile">新头像
                <img src="/static/img/default.png" alt="" id="id_img" height="80" width="80"
                     style="margin-left: 10px">
            </label>
            <input type="file" accept="image/*" name="myhead" id="id_myfile" style="display: none">
        </div>
        <div class="text-center">
            <input type="submit" value="修改" id="id_submit" class="btn btn-danger "><span
                class="error text-danger" style="margin-left: 10px"></span>
        </div>
    </form>
{% endblock %}
{% block script %}
    <script>
        $('#id_myfile').change(function () {
            let filereader = new FileReader()
            filereader.readAsDataURL(this.files[0])
            filereader.onload = function () {
                $('#id_img').attr('src', filereader.result)
            }
        })
    </script>
{% endblock %}